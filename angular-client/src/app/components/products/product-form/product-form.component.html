<div class="h-100 d-flex justify-content-center align-self-center">
  <div class="d-flex justify-content-center align-items-center w-100">
    <div class="shadow p-5 rounded-3 col col-sm-10 col-md-8 col-lg-6 mx-auto">
      <h3>{{ formTitle }}</h3>
      <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label for="product-name" class="form-label">Nombre</label>
          <input type="text" class="form-control" id="product-name" formControlName="productName"
                 [class.is-invalid]="productForm.controls['productName'].touched && productForm.controls['productName'].invalid">
          @if (productForm.controls["productName"].touched && productForm.controls["productName"].hasError("required")) {
            <div class="text-danger fst-italic">
              <span>Este campo es requerido.</span>
            </div>
          }
        </div>

        <div class="mb-3">
          <label for="product-category" class="form-label">Categoría</label>
          <select class="form-select" id="product-category" formControlName="productCategory"
                  [class.is-invalid]="productForm.controls['productCategory'].touched && productForm.controls['productCategory'].invalid"
                  aria-label="categoría del producto">
            @for (category of categories; track category.id) {
              <option [value]="category.id">{{ category.name }}</option>
            }
          </select>
          @if (productForm.controls["productCategory"].touched && productForm.controls["productCategory"]
            .hasError("required")) {
            <div class="text-danger fst-italic">
              <span>Este campo es requerido.</span>
            </div>
          }
        </div>

        <div class="mb-3">
          <label for="image" class="form-label">Imagen</label>
          <input type="file" class="form-control" id="image" (change)="onFileChange($event)"
                 [class.is-invalid]="productForm.controls['image'].touched && productForm.controls['image'].invalid"
                 alt="product image">
          @if (productForm.controls["image"].touched && productForm.controls["image"].hasError("required")) {
            <div class="text-danger fst-italic">
              <span>Este campo es requerido.</span>
            </div>
          }
        </div>
        @if(imagePreview) {
          <div>
            <img [src]="imagePreview" alt="Image Preview" class="img-thumbnail" style="max-width: 200px;">
          </div>
        }
        <div class="d-flex justify-content-end">
          <button type="submit" class="btn btn-primary">
            {{ submitButtonText }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
